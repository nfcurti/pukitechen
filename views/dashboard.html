<!DOCTYPE html>
<html lang="en">
<head>
  <title>Puki Technologies</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="HTML5 website template">
  <meta name="keywords" content="global, template, html, sass, jquery">
  <meta name="author" content="nfc">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="icon" 
      type="image/svg" 
      href="/img/logo.svg">
</head>
<body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-164575999-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-164575999-2');
</script>
<!-- notification for small viewports and landscape oriented smartphones -->
<div class="device-notification">
  <a class="device-notification--logo" href="#0">
    <img src="/img/logo.svg" alt="Global">
    
  </a>
  <p class="device-notification--message">Puki has so much to offer that we must request you orient your device to portrait or find a larger screen. You won't be disappointed.</p>
</div>

<div class="perspective effect-rotate-left">
  <div class="container"><div class="outer-nav--return"></div>
    <div id="viewport" class="l-viewport" style="overflow: scroll;">
      <div class="l-wrapper">
        <header class="header">
          <a class="header--logo" href="#0">
            <img src="/img/logo.svg" alt="logo" width="50">
            <h2 style="margin-left: 3em">Your Dashboard</h2>
          </a>
          <button class="header--cta cta"><a href='https://twitter.com/pukitechs'>Contact Us</a></button>
          <div class="header--nav-toggle">
            <span></span>
          </div>
        </header>
        <nav class="l-side-nav">
          <ul class="side-nav">
            <li class="is-active"><span>Home</span></li>
            <li><span>How</span></li>
            <li><span>Team</span></li>
            <li><span>Contact</span></li>
          </ul>
        </nav>
        <ul class="l-main-content main-content">
          <li class="l-section section section--is-active">
            <div class="intro">
              <div class="intro--banner" style="position: initial;">

                <button id="connect" class="cta">Connect
                  <span class="btn-background"></span>
                </button>
                <div class="footstepsData">
                  <div>Footsteps (Session)
                    <p>42 
                      <span>steps</span></p>
                  </div>
                  <div>Footsteps (Total)
                    <p>237 
                      <span>steps</span></p>
                  </div>
                  <div>Average
                    <p>1.986 
                      <span>steps/day</span></p>
                  </div>
                  <div>Uptime
                    <p>2 
                      <span>days</span></p>
                  </div>
                </div>
                <br>
                <div>
                  <canvas id="myChart" width="800" height="300"></canvas>
                </div>
              </div>
            </div>
          </li>
          <li class="l-section section">
            <div class="work" style="margin-top: -10%;">
              <h2 style="margin-bottom: 5em;margin-top: 5em">How it works</h2>
              <div class="work--lockup row" style="display: block;margin: 0 auto;margin-bottom: 5em">
                  <img onmouseover="document.getElementById('content').innerHTML = 'On every motion such as a footfall, you produce mechanical energy'" src="/img/ff.svg" alt="ff" width="40">
                  <img  src="/img/back.svg" alt="battery" width="20" style="    margin-bottom: 1.2em;margin-left: 2em">
                  <img onmouseover="document.getElementById('content').innerHTML = 'Footfall energy gets transformed into electricity through energy harvesting'" onmouseover="bigImg(this)" src="/img/recycle.svg" alt="battery" width="50" style="    margin-left: 2em">
                  <img onmouseover="bigImg(this)" src="/img/back.svg" alt="battery" width="20" style="    margin-bottom: 1.2em;margin-left: 2em">
                  <img onmouseover="document.getElementById('content').innerHTML = 'Energy gets directly stored on small batteries'" onmouseover="bigImg(this)" src="/img/battery.svg" alt="battery" width="50" style="    margin-left: 2em">
                  <img onmouseover="bigImg(this)" src="/img/back.svg" alt="battery" width="20" style="    margin-bottom: 1.2em;margin-left: 2em">
                  <img onmouseover="document.getElementById('content').innerHTML = 'A small portion is used to send the specific footfall data to our servers'" onmouseover="bigImg(this)" src="/img/energy.svg" alt="battery" width="50" style="    margin-left: 2em">
              </div>
              <h2 id="content" style="display: block;margin: 0 auto;font-size: 1.3em">Hover on icon to learn more!</h2>
            </div>
          </li>
          <li class="l-section section">
            <div class="about">
              <div class="about--banner">
                <h2>We<br>believe in<br>passionate<br>people</h2>
                
                <img src="/img/about-visual.png" alt="About Us" style="display: none">
              </div>
              <div class="about--options">
                <a href="https://www.linkedin.com/in/ncurti/" style="background-image: url(/img/3.jpg);">
                  <h3>CEO - Founder</h3>
                </a>
              </div>
            </div>
          </li>
          <li class="l-section section">
            <div class="contact">
              <div class="contact--lockup">
                <div class="modal">
                  <div class="modal--information">
                    <p>Milan, Italy</p>
                    <a href="mailto:ouremail@gmail.com">info@pukitechnologies.com</a>
                    <a href="tel:+393495479701">Call Us</a>
                  </div>
                  
                </div>
              </div>
            </div>
          </li>
          <li class="l-section section">
            <div class="hire">
              <h2>You want us to do</h2>
              <!-- checkout formspree.io for easy form setup -->
              <form class="work-request">
                <div class="work-request--options">
                  <span class="options-a">
                    <input id="opt-1" type="checkbox" value="app design">
                    <label for="opt-1">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 150 111" style="enable-background:new 0 0 150 111;" xml:space="preserve">
                      <g transform="translate(0.000000,111.000000) scale(0.100000,-0.100000)">
                        <path d="M950,705L555,310L360,505C253,612,160,700,155,700c-6,0-44-34-85-75l-75-75l278-278L550-5l475,475c261,261,475,480,475,485c0,13-132,145-145,145C1349,1100,1167,922,950,705z"/>
                      </g>
                      </svg>
                      App Design
                    </label>
                    <input id="opt-2" type="checkbox" value="graphic design">
                    <label for="opt-2">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 150 111" style="enable-background:new 0 0 150 111;" xml:space="preserve">
                      <g transform="translate(0.000000,111.000000) scale(0.100000,-0.100000)">
                        <path d="M950,705L555,310L360,505C253,612,160,700,155,700c-6,0-44-34-85-75l-75-75l278-278L550-5l475,475c261,261,475,480,475,485c0,13-132,145-145,145C1349,1100,1167,922,950,705z"/>
                      </g>
                      </svg>
                      Graphic Design
                    </label>
                    <input id="opt-3" type="checkbox" value="motion design">
                    <label for="opt-3">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 150 111" style="enable-background:new 0 0 150 111;" xml:space="preserve">
                      <g transform="translate(0.000000,111.000000) scale(0.100000,-0.100000)">
                        <path d="M950,705L555,310L360,505C253,612,160,700,155,700c-6,0-44-34-85-75l-75-75l278-278L550-5l475,475c261,261,475,480,475,485c0,13-132,145-145,145C1349,1100,1167,922,950,705z"/>
                      </g>
                      </svg>
                      Motion Design
                    </label>
                  </span>
                  <span class="options-b">
                    <input id="opt-4" type="checkbox" value="ux design">
                    <label for="opt-4">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 150 111" style="enable-background:new 0 0 150 111;" xml:space="preserve">
                      <g transform="translate(0.000000,111.000000) scale(0.100000,-0.100000)">
                        <path d="M950,705L555,310L360,505C253,612,160,700,155,700c-6,0-44-34-85-75l-75-75l278-278L550-5l475,475c261,261,475,480,475,485c0,13-132,145-145,145C1349,1100,1167,922,950,705z"/>
                      </g>
                      </svg>
                      UX Design
                    </label>
                    <input id="opt-5" type="checkbox" value="webdesign">
                    <label for="opt-5">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 150 111" style="enable-background:new 0 0 150 111;" xml:space="preserve">
                      <g transform="translate(0.000000,111.000000) scale(0.100000,-0.100000)">
                        <path d="M950,705L555,310L360,505C253,612,160,700,155,700c-6,0-44-34-85-75l-75-75l278-278L550-5l475,475c261,261,475,480,475,485c0,13-132,145-145,145C1349,1100,1167,922,950,705z"/>
                      </g>
                      </svg>
                      Webdesign
                    </label>
                    <input id="opt-6" type="checkbox" value="marketing">
                    <label for="opt-6">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 150 111" style="enable-background:new 0 0 150 111;" xml:space="preserve">
                      <g transform="translate(0.000000,111.000000) scale(0.100000,-0.100000)">
                        <path d="M950,705L555,310L360,505C253,612,160,700,155,700c-6,0-44-34-85-75l-75-75l278-278L550-5l475,475c261,261,475,480,475,485c0,13-132,145-145,145C1349,1100,1167,922,950,705z"/>
                      </g>
                      </svg>
                      Marketing
                    </label>
                  </span>
                </div>
                <div class="work-request--information">
                  <div class="information-name">
                    <input id="name" type="text" spellcheck="false">
                    <label for="name">Name</label>
                  </div>
                  <div class="information-email">
                    <input id="email" type="email" spellcheck="false">
                    <label for="email">Email</label>
                  </div>
                </div>
                <input type="submit" value="Send Request">
              </form>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <ul class="outer-nav">
    <li class="is-active">Home</li>
    <li>How</li>
    <li>Team</li>
    <li>Contact</li>
  </ul>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('myChart').getContext('2d');
function average(ctx) {
  const values = ctx.chart.data.datasets[0].data;
  return values.reduce((a, b) => a + b, 0) / values.length;
}
const myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['1/10/2022', '2/10/2022', '3/10/2022', '4/10/2022', '5/10/2022', '6/10/2022'],
        datasets: [{
            label: '# of steps',
            data: [12, 19, 13, 15, 21, 13],
            backgroundColor: [
                'rgba(15,51,255,0.5)'
            ],
            borderColor: [
                'rgba(15,51,255,1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
          x: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(255,255,255,0.1)'
                }

            },
            y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(255,255,255,0.1)'
                }

            }
        }
    },
    plugins: {
      annotation: {
        annotations: {
          type: 'line',
          borderColor: 'white',
          borderDash: [6, 6],
          borderDashOffset: 0,
          borderWidth: 3,
          label: {
            enabled: true,
            content: (ctx) => 'Average: ' + average(ctx).toFixed(2),
            position: 'end'
          },
          scaleID: 'y',
          value: (ctx) => average(ctx)

                }
      }
    }

});
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/vendor/jquery-2.2.4.min.js"><\/script>')</script>

<script>
  const button = document.getElementById('connect')
  var serviceUUID = '4fafc201-1fb5-459e-8fcc-c5c9c331914b'
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  function handleNotifications(event) {
  let value = event.target.value;
  let a = [];
  // Convert raw data bytes to hex values just for the sake of showing something.
  // In the "real" world, you'd use data.getUint8, data.getUint16 or even
  // TextDecoder to process raw data bytes.
  for (let i = 0; i < value.byteLength; i++) {
    a.push('0x' + ('00' + value.getUint8(i).toString(16)).slice(-2));
  }
  log('> ' + a.join(' '));
}
  button.addEventListener('pointerup', function(event) {
     navigator.bluetooth.requestDevice({
      acceptAllDevices: true,
        optionalServices: [ serviceUUID ]
  })
  .then(device => {
    bluetoothDevice = device;
    return device.gatt.connect();
  })
  .then(server => {
    return server.getPrimaryService(serviceUUID);
  })
  .then(service => {
    return service.getCharacteristic('beb5483e-36e1-4688-b7f5-ea07361b26a8');
  })
  .then(characteristic => characteristic.startNotifications())
  .then(characteristic => {
    characteristic.addEventListener('characteristicvaluechanged',
                                    handleCharacteristicValueChanged);
    console.log('Notifications have been started.');
  })
  .catch(error => { console.log(error); });


  var buffer = []

  function handleCharacteristicValueChanged(event) {
    var value = JSON.stringify(event.target.value);
    console.log('Pushing ' + value);
    buffer.push(value)

    var time = Date.now();


    if (!buffer.includes(time)) {
      console.log(buffer)
       var url = "https://script.google.com/macros/s/AKfycbxCpCi08Og8DPEf3QDuRQWX78xeqiM4JCsuEwycIDdkx-5t1vXb966Qy6aXcBArB6_m/exec?uuid="+serviceUUID+"&date="+time+"&action=step"
        fetch(url, {mode:"no-cors"}).then(function(response) {
        }).then(function(data) {
        }).catch(function(e) {
          console.log(e);
        });
      buffer.push(time);
    }
  }
        });
</script>
</body>
</html>